var fitScreen_href=location.href;var fitScreen_isError=false;var Detector=function(){var e=navigator.userAgent,d=(/Opera/i).test(e),f=(/Android/i).test(e),h=navigator.appVersion.indexOf("UC")!=-1,c=(/MeeGo/i).test(e),a=(/Windows Phone OS/i).test(e),b=(/Mac OS/i).test(e),g=(/Chrome/i).test(e);return{ua_lowerCase:e.toLowerCase(),isIPad:(/iPad/i).test(e),isIPhoneOrIPod:(/iPhone/i).test(e)||(/iPod/i).test(e),isNexus7:window.devicePixelRatio==1.3312499523162842,isIOS:b,isIOS_gte7:b&&(parseFloat(e.substr(e.indexOf("Version")+8,3))>=7),isAndroid:f,isWP:a,isMeeGo:c,isUC:h,isOpera:d,isIE:(/MSIE/i).test(e),isChrome:(/Chrome/i).test(e)&&((/SAMSUNG/i).test(e)==false),isAndroidOriginalBrowser:f&&!h&&!d,isDesktop:!a&&!b&&!f&&!c&&!(/Opera Mobi/i).test(e),isSamSungPad:window.devicePixelRatio==1&&!b&&window.outerWidth>480,isFirefox:(/Firefox/i).test(e),isWebkit:(/WebKit/i).test(e)}}();var getIsLandscape=function(){var b=false,a=window.orientation,d={"90":true,"-90":true},c={"0":true,"180":true};d[a]&&(b=true);if(Detector.isChrome){b=window.innerWidth>window.innerHeight?true:false}else{if(Detector.isSamSungPad){c[a]&&(b=true);d[a]&&(b=false)}}return b};var getAndroidVersion=function(){if(Detector.ua_lowerCase.indexOf("android")==-1){return NaN}var b=Detector.ua_lowerCase.indexOf("android")+8;var a=parseInt(Detector.ua_lowerCase.substring(b,++b),10);return a};var getAndroidDeviceResolution=function(){var b,a=getIsLandscape();if(Detector.isAndroid||Detector.isMeeGo){if(getAndroidVersion()<3){b=window.outerWidth}else{b=screen.width;Detector.isNexus7&&a&&(b=1280)}}return b};var getDeviceWidth_cssPixels=function(){var a=getAndroidDeviceResolution(),b;if(Detector.isChrome){b=getIsLandscape()?Math.max(screen.width,screen.height):Math.min(screen.width,screen.height);if(typeof window.devicePixelRatio=="number"){b=b/window.devicePixelRatio}}else{if(Detector.isIOS){b=getIsLandscape()?screen.height:screen.width}else{if(Detector.isAndroid||Detector.isMeeGo){b=a/window.devicePixelRatio}}}return b};var getScale=function(){var b=getDeviceWidth_cssPixels(),a;if(typeof b=="number"){a=b/fitScreen_pageWidth_cssPixels}return a};var setViewPortCnt=function(c,b){var a="width="+fitScreen_pageWidth_cssPixels;if(Detector.isUC){a+=", uc-fitscreen=yes, user-scalable="+(b.isScalable?"yes":"no")}else{if(Detector.isWP){a+=", initial-scale=1.0, minimum-scale=1.0"+(b.isScalable?"":", maximum-scale=1.0")}else{var d=getScale();a+=", initial-scale="+d+", minimum-scale="+d+(b.isScalable?"":", maximum-scale="+d);if(Detector.isIPhoneOrIPod){if(Detector.isIOS_gte7){a+=", user-scalable="+(b.isScalable?"true":"false")}else{a="initial-scale="+d+", minimum-scale="+d+(b.isScalable?"":", maximum-scale="+d)}}}}c.setAttribute("content",a)};var placeViewPort=function(){var b=document.getElementsByName("viewport")[0];if(b===undefined||b===null){var a=document.getElementsByTagName("head")[0];b=document.createElement("meta");b.setAttribute("name","viewport");a.appendChild(b)}return b};var placeOtherMeta=function(){var b=document.getElementsByName("format-detection")[0];if(b===undefined||b===null){var a=document.getElementsByTagName("head")[0];b=document.createElement("meta");b.setAttribute("name","format-detection");b.setAttribute("content","telephone=no");a.appendChild(b)}};var clearTimeOutID=function(a){if(a.length>0){for(var b=0;b<a.length;b++){clearTimeout(a.pop())}}};var timeOutID=[];var setViewPort=function(e,a,b){clearTimeOutID(timeOutID);var c=document.getElementsByTagName("head")[0];if(e.getAttribute("content")==undefined){setViewPortCnt(e,b);typeof a=="function"&&a()}else{if(Detector.isAndroidOriginalBrowser||Detector.isIOS){var d=250;timeOutID.push(setTimeout(function(){c.removeChild(e);timeOutID.push(setTimeout(function(){location.replace(fitScreen_href)},d))},d))}else{if(Detector.isOpera){c.removeChild(e);location.replace(fitScreen_href)}}}};var checkPageWidth=function(){if(fitScreen_pageWidth_cssPixels===undefined||fitScreen_pageWidth_cssPixels===null){alert("'fitScreen_pageWidth_cssPixels' 配置項未定義, 請定義後再試! ");return false}else{if(typeof fitScreen_pageWidth_cssPixels!="number"){alert("'fitScreen_pageWidth_cssPixels' 配置項不是數字類型, 請重新配置後再試! ");return false}else{if(isNaN(fitScreen_pageWidth_cssPixels)){alert("'fitScreen_pageWidth_cssPixels' 配置項不能為NaN, 請重新配置後再試! ");return false}else{if(fitScreen_pageWidth_cssPixels<0){alert("'fitScreen_pageWidth_cssPixels' 配置項不能為負數, 請重新配置後再試! ");return false}}}}return true};var placeViewPortForFF=function(){var b=document.getElementsByName("viewport")[0];if(b===undefined||b===null){var a=document.getElementsByTagName("head")[0];b=document.createElement("meta");b.setAttribute("name","viewport");b.setAttribute("content","width="+fitScreen_pageWidth_cssPixels);a.appendChild(b)}};var fitScreen_lastOrientation=0;var fitSize=function(c){if(!checkPageWidth()){return}if(!Detector.isOpera){var b=document.getElementsByName("viewport")[0]==undefined;if(window.orientation==fitScreen_lastOrientation&&!b){return}fitScreen_lastOrientation=window.orientation}placeOtherMeta();var a=document.getElementsByTagName("body")[0];a.style.display="none";setViewPort(placeViewPort(),function(){a.style.display="block";if(fitScreen_isError==false){fitScreen_beforeCallBack(c)}if(typeof c.cb=="function"){c.cb()}},c)};var fitScreen_errorCallBack=function(){var c=document.getElementById("fitScreen_info_box"),a=document.getElementsByTagName("body")[0],b=document.getElementById("wrap");if(!!c&&!!b){b.style.display="none";c.style.display="block"}};var fitScreen_prepareTipHtml=function(b){if(!!document.getElementById("fitScreen_info_box")==false){var c="",a=document.getElementsByTagName("body")[0],e=document.createElement("div"),d=b?"直向":"橫向";c="<div id='fitScreen_info_box' class='fitScreen_info_box'><span class='j_icon j_mobile-phone'></span><strong>建議將手機以"+d+"檢視網頁內容</strong></div>";e.innerHTML=c;a.appendChild(e.children[0])}};var fitScreen_beforeCallBack=function(b){if(typeof b.isOnlyPortrait=="boolean"&&typeof b.errorCallBack!="function"){var d=document.getElementById("fitScreen_info_box"),a=document.getElementsByTagName("body")[0],c=document.getElementById("wrap");if(!!d&&!!c){c.style.display="block";d.style.display="none"}}};var fitScreen_pageWidth_cssPixels=640;var supportsOrientationChange="onorientationchange" in window,orientationEvent=supportsOrientationChange?"orientationchange":"resize";var fitScreen=function(e,f){f=f==void 0?{}:f;fitScreen_pageWidth_cssPixels=e;if(true){if(f.isHideAddressBar==true||f.isHideAddressBar==void 0){setTimeout(function(){window.scrollTo(0,0)},0)}if(typeof f.isOnlyPortrait=="boolean"){window.addEventListener(orientationEvent,function(){fitScreen(e,f)},false);var d=getIsLandscape();if(typeof f.errorCallBack!="function"){fitScreen_prepareTipHtml(f.isOnlyPortrait)}if(f.isOnlyPortrait){if(d){typeof f.errorCallBack=="function"?f.errorCallBack():fitScreen_errorCallBack();fitScreen_isError=true}}else{if(!d){typeof f.errorCallBack=="function"?f.errorCallBack():fitScreen_errorCallBack();fitScreen_isError=true}}}if(!Detector.isDesktop&&Detector.isFirefox){placeViewPortForFF();var b=document.getElementsByTagName("body")[0];b.style.display="block"}else{fitSize(f);window.addEventListener(orientationEvent,function(){fitSize(f)},false)}}else{alert("本頁面不支持桌面版瀏覽器，請用移動瀏覽器打開本頁面")}var g=Detector.isWebkit?"webkit":Detector.isFirefox?"Moz":Detector.isIE?"ms":"",a=document.hidden!==undefined?"hidden":document[g.toLowerCase()+"Hidden"]!==undefined?g.toLowerCase()+"Hidden":undefined,c=document.hidden!==undefined?"visibilitychange":document[g.toLowerCase()+"Hidden"]!==undefined?g.toLowerCase()+"visibilitychange":undefined;document.addEventListener(c,function(){var i=a!==undefined?!document[a]:true;if(i){var h=document.getElementsByTagName("head")[0];var j=document.getElementsByName("viewport")[0];h.removeChild(j);location.replace(fitScreen_href)}},false)};
